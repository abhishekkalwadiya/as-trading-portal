
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>A S TRADING - Client Registration</title>
<style>
  body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
  .container { max-width: 600px; margin: auto; background: white; padding: 25px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.15); }
  h2 { text-align: center; color: #1a237e; }
  label { display: block; margin-top: 15px; }
  input, select { width: 100%; padding: 10px; margin-top: 5px; border-radius: 8px; border: 1px solid #ccc; }
  button { margin-top: 20px; width: 100%; padding: 12px; background: #43cea2; color: white; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; }
  button:hover { background: #2b5876; }
</style>
</head>
<body>
<div class="container">
  <h2>A S TRADING - Client Registration ðŸ’°</h2>
  <form id="registrationForm">
    <label>Name:<input name="name" required type="text"/></label>
    <label>Age:<input name="age" required type="number"/></label>
    <label>Birth Date:<input name="birthDate" required type="date"/></label>
    <label>State:
      <select name="state" required>
        <option value="">Select State</option>
        <option value="Rajasthan">Rajasthan</option>
        <option value="Maharashtra">Maharashtra</option>
        <option value="Bihar">Bihar</option>
        <option value="Uttar Pradesh">Uttar Pradesh</option>
        <option value="Madhya Pradesh">Madhya Pradesh</option>
      </select>
    </label>
    <label>Contact Number:<input name="contact" required type="tel"/></label>
    <label>Plan:
      <select name="plan" required>
        <option value="">Select Plan</option>
        <option value="399">Rs.399</option>
        <option value="499">Rs.499</option>
        <option value="599">Rs.599</option>
        <option value="699">Rs.699</option>
        <option value="799">Rs.799</option>
        <option value="899">Rs.899</option>
        <option value="999">Rs.999</option>
      </select>
    </label>
    <label>Payment Method:
      <select name="payment" required>
        <option value="">Select Method</option>
        <option value="PhonePe">PhonePe</option>
        <option value="Paytm">Paytm</option>
        <option value="GooglePay">Google Pay</option>
        <option value="BHIM">BHIM UPI</option>
      </select>
    </label>
    <button type="submit">Submit & Pay</button>
  </form>
</div>
<script>
document.getElementById("registrationForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const form = e.target;
  const formData = {
    name: form.name.value,
    age: form.age.value,
    birthDate: form.birthDate.value,
    state: form.state.value,
    contact: form.contact.value,
    plan: form.plan.value,
    payment: form.payment.value,
    status: "Pending"
  };

  try {
    const res = await fetch('/register', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(formData)
    });
    const result = await res.json();
    if (result.success) {
      const upiLink = `upi://pay?pa=ganuiii@indie&am=${formData.plan}&cu=INR`;
      window.location.href = upiLink;
    } else {
      alert("Submission failed.");
    }
  } catch (err) {
    alert("Error submitting form.");
    console.error(err);
  }
});
</script>
</body>
</html>
